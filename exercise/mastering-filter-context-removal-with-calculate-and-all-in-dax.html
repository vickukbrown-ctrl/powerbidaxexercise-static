
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="Mastering Filter Context Removal with CALCULATE and ALL in DAX">
    <meta name="description" content="Understand and apply the CALCULATE function to modify and remove filter contexts using ALL, thereby calculating contributions relative to different total scopes.">
    <meta property="og:title" content="Mastering Filter Context Removal with CALCULATE and ALL in DAX">
    <meta property="og:description" content="Understand and apply the CALCULATE function to modify and remove filter contexts using ALL, thereby calculating contributions relative to different total scopes.">
    <meta property="og:url" content="https://powerbidaxexercise.com/exercise/mastering-filter-context-removal-with-calculate-and-all-in-dax.html">
    <meta property="og:type" content="article">
    <link rel="canonical" href="https://powerbidaxexercise.com/exercise/mastering-filter-context-removal-with-calculate-and-all-in-dax.html">
    <title>Mastering Filter Context Removal with CALCULATE and ALL in DAX</title>
    <style>
        body {
            background-color: #0f111a;
            color: #e5e7eb;
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 960px;
            margin: auto;
            background-color: #1e1e2f;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        h1, h2, h3 { color: #f9fafb; }
        img {
            display: block;
            margin: 20px auto;
            max-width: 85%;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.4);
        }
        a {
            color: #3b82f6;
            text-decoration: none;
        }
        a:hover { text-decoration: underline; }
        .section { margin-bottom: 40px; }
        .footer {
            text-align: center;
            font-size: 0.9rem;
            color: #9ca3af;
            margin-top: 50px;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>Mastering Filter Context Removal with CALCULATE and ALL in DAX</h1>
    <h3>üßÆ Function: CALCULATE, ALL, DIVIDE</h3>
    <p><strong>Difficulty:</strong> Beginner</p>
    <hr>

    <div class="section">
        <h2>üìö Theory & Explanation</h2>
        The CALCULATE function is one of the most powerful and fundamental functions in DAX. It evaluates an expression in a modified filter context. This modification can involve adding new filters, overriding existing ones, or removing them entirely. The ALL function, when used as a filter argument within CALCULATE, removes all filters from a specified table or column, allowing the calculation to refer to the grand total or a total for a larger scope. This is crucial for 'percentage of total' calculations, where you need to compare a value against a total unconstrained by certain filters.
    </div>

    
    
        <div class="section">
            <h2>üß© Example Use Case</h2>
            Students and analysts commonly combine `CALCULATE`, `ALL`, and `DIVIDE` to effectively calculate a Percentage of Total measure. For instance, to analyze a product category's contribution to overall sales, you'd use `CALCULATE` to modify the filter context, `ALL` to remove product category filters to get the grand total sales in the denominator, and `DIVIDE` to safely perform the division, providing a robust and dynamic percentage.
        </div>
        

    <div class="section">
        <h2>üéØ Your Task</h2>
        1. Download and unzip the provided Power BI file.
2. Open the Power BI file and observe the existing matrix showing 'Sales by environment and centre type'.
3. If it doesn't exist, create a base measure called `Total Sales` (e.g., `SUM('YourSalesTable'[SalesColumn])`).
4. Create a new measure in the 'All measures' table named `All environment contribution`.
5. Define this measure to calculate the ratio of `Total Sales` to `Total Sales` with the 'Environment' filter removed, using `CALCULATE` and `ALL`.
6. Add the `All environment contribution` measure to your matrix visualization.
7. Verify that the sum of `All environment contribution` for each row (representing a 'Centre Type') equals 100%.
8. Create a second new measure in the 'All measures' table called `Grand total contribution`.
9. Define this measure to calculate the ratio of `Total Sales` to `Total Sales` with *both* the 'Environment' and 'Centre Type' filters removed, using `CALCULATE` and `ALL` twice.
10. Add the `Grand total contribution` measure to your matrix or a separate card visual.
11. Verify that the grand total of `Grand total contribution` equals 100%.
12. Save the Power BI file as 'No constraints'.
        <pre style="background-color:#27293d; padding:10px; border-radius:8px; color:#a5b4fc;">Total Sales = SUM('Sales'[SalesAmount])</pre>
    </div>

    
    

    <div class="footer">
        <p>¬© 2025 DAX Trainer | Learn Power BI DAX the practical way.</p>
        <a href="/index.html">üè† Home</a> ‚Ä¢
        <a href="/terms.html">Terms</a> ‚Ä¢
        <a href="/privacy.html">Privacy</a>
    </div>
</div>
</body>
</html>
